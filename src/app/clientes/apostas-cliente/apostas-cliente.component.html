<div id="default-content">
    <app-spinner *ngIf="showLoading"></app-spinner>
    <ng-container *ngIf="!showLoading">
        <a class="btnClose hide-desktop" aria-label="Close" (click)="activeModal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="internal-container-out">
            <div class="content-header">
                <h2>{{'geral.apostas' | translate}} </h2>
            </div>

            <div class="tabs">
                <a *ngIf="esporteHabilitado" [ngClass]="tabSelected == 'esporte' ? 'active' : ''" (click)="changeTab('esporte')">{{'geral.esporte' | translate}} </a>
                <a *ngIf="acumuladaoHabilitado" [ngClass]="tabSelected == 'acumuladao' ? 'active' : ''"
                (click)="changeTab('acumuladao')">{{'geral.acumuladao' | translate}}</a>
                <a *ngIf="desafioHabilitado" [ngClass]="tabSelected == 'desafio' ? 'active' : ''"
                (click)="changeTab('desafio')">{{'geral.desafio' | translate}}</a>
                <a *ngIf="casinoHabilitado" [ngClass]="tabSelected == 'cassino' ? 'active' : ''"
                (click)="changeTab('cassino')">{{'geral.cassino' | translate}}</a>
                <a *ngIf="loteriasHabilitada" [ngClass]="tabSelected == 'loteria' ? 'active' : ''"
                (click)="changeTab('loteria')">{{'geral.loteria' | translate}}</a>
                <a *ngIf="loteriaPopularHabilitada" [ngClass]="tabSelected == 'loteria-popular' ? 'active' : ''"
                (click)="changeTab('loteria-popular')">{{'submenu.loteriaPopular' | translate}}</a>
            </div>

            <div class="content-body">
                <form (ngSubmit)="onSubmit()" [formGroup]="form">
                    <div class="filtros">
                        <input
                            name="datepicker"
                            class="dp-hidden"
                            ngbDatepicker
                            #datepicker="ngbDatepicker"
                            [autoClose]="'outside'"
                            (dateSelect)="onDateSelection($event, datepicker)"
                            [displayMonths]="2"
                            [dayTemplate]="t"
                            outsideDays="hidden"
                            [startDate]="fromDate!"
                            tabindex="-1"
                            value=""
                        >
                        <ng-template #t let-date let-focused="focused">
                                        <span class="custom-day"
                                            [class.focused]="focused"
                                            [class.range]="isRange(date)"
                                            [class.faded]="isHovered(date) || isInside(date)"
                                            (mouseenter)="hoveredDate = date"
                                            (mouseleave)="hoveredDate = null">
                                            {{ date.day }}
                                        </span>
                        </ng-template>
                        <div class="input-group datepicker-group">
                            <i class="fa fa-calendar"></i>
                            <input
                                type="text"
                                class="form-control inverted-out"
                                [(ngModel)]="selectedDate"
                                (click)="datepicker.toggle()"
                                [ngModelOptions]="{standalone: true}"
                                style="border-radius: 5px"
                            >
                        </div>
                        <select class="form-control inverted-out" formControlName="status">
                            <option value="">{{'geral.todos' | translate}}</option>
                            <option value="ganhou">{{'geral.ganhou' | translate}}</option>
                            <option value="perdeu">{{'geral.perdeu' | translate}}</option>
                            <option value="pendente">{{'geral.pendente' | translate}}</option>
                            <option value="reembolso">{{'geral.reembolso' | translate}}</option>
                        </select>
                        <button class="btn btn-custom" type="submit">{{'geral.filtrar' | translate}}</button>
                    </div>
                </form>

                <div class="info-resultado">
                    <div class="item">
                        <label>{{'geral.qtdApostas' | translate}}:</label> {{ apostas.length }}
                    </div>
                    <div class="item">
                        <label>{{'geral.totalApostado' | translate}} :</label> {{ totais.valor | currency }}
                    </div>
                    <div class="item">
                        <label>{{'geral.totalPremios' | translate}}:</label> {{ totais.premio | currency }}
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table">
                        <thead>
                        <tr>
                            <th width="100">{{'geral.codigo' | translate}}</th>
                            <th *ngIf="tabSelected == 'cassino'">{{'geral.nomeJogoCassino' | translate}}</th>
                            <th>{{'geral.horario' | translate}}</th>
                            <th>{{'geral.valor' | translate}}</th>
                            <th>{{'geral.premio' | translate}} </th>
                            <th></th>
                        </tr>
                        </thead>
                        <tr *ngIf="loading">
                            <td colspan="8" class="no-border" align="center"><i class="fa fa-spinner fa-spin"></i>
                                {{'geral.carregando' | translate}}
                            </td>
                        </tr>
                        <tbody *ngIf="!loading">
                        <tr *ngFor="let aposta of apostas" class="{{ classNameAposta(aposta) }}">
                            <td>{{ aposta.codigo }}</td>
                            <td *ngIf="tabSelected == 'cassino'">{{ aposta.game | formatarNomeJogoCassino }}</td>
                            <td>{{ aposta.horario }}</td>
                            <td>{{ aposta.valor | currency}}</td>
                            <td>{{ aposta.premio | currency }}</td>
                            <td class="acoes-aposta" *ngIf="tabSelected !== 'cassino' && tabSelected !== 'loteria-popular'">
                                <a *ngIf="isCliente && aposta.tipo === 'esportes'" href="https://{{slug}}/bilhete/{{aposta.codigo}}{{origin}}" target="_blank" title="ACOMPANHAR BILHETE AO-VIVO" >
                                    <i class="fa fa-external-link"></i>
                                </a>
                                <a title="{{'geral.exibir' | translate}}" (click)="openModal(aposta)">
                                    <i class="fa fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </ng-container>
</div>
