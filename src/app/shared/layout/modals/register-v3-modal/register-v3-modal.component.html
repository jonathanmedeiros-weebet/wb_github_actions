
<div class="contents-register" [ngClass]="{'registerCancelActive' : registerCancel}">
    <div class="banner">
        <div
            class="banner__mobile"
            *ngIf="registerBannerMobile"
            [ngStyle]="{'background-image': 'url(' + registerBannerMobile + ')' }"
        ></div>
        <div
            class="banner__desktop"
            *ngIf="registerBannerDesktop"
            [ngStyle]="{'background-image': 'url(' + registerBannerDesktop + ')' }"
        ></div>
    </div>
    
    <div class="container" *ngIf="modalClose">
        <div class="container-header">
            <div class="header-register">
                <div class="modal-footer-onboarding">
                    <div class="div-option-register-or-login">
                        <span>{{'geral.jaPossuiUmaConta' | translate}}</span>
                        <a type="button" (click)="openLogin()" class="btn-footer">{{'geral.logIn' | translate}}</a>
                    </div>
                    <div class="header-register-item">
                        <a type="button" class="btn-close-register" (click)="onClose()">
                            <svg class="icon-hover" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <rect x="0.00195312" width="32" height="32" rx="2"/>
                                <path d="M16.0019 17.8669L12.1352 21.7336C11.8907 21.978 11.5796 22.1003 11.2019 22.1003C10.8241 22.1003 10.513 21.978 10.2685 21.7336C10.0241 21.4891 9.90186 21.178 9.90186 20.8003C9.90186 20.4225 10.0241 20.1114 10.2685 19.8669L14.1352 16.0003L10.2685 12.1669C10.0241 11.9225 9.90186 11.6114 9.90186 11.2336C9.90186 10.8558 10.0241 10.5447 10.2685 10.3003C10.513 10.0558 10.8241 9.93359 11.2019 9.93359C11.5796 9.93359 11.8907 10.0558 12.1352 10.3003L16.0019 14.1669L19.8352 10.3003C20.0796 10.0558 20.3907 9.93359 20.7685 9.93359C21.1463 9.93359 21.4574 10.0558 21.7019 10.3003C21.9685 10.5669 22.1019 10.8838 22.1019 11.2509C22.1019 11.618 21.9685 11.9234 21.7019 12.1669L17.8352 16.0003L21.7019 19.8669C21.9463 20.1114 22.0685 20.4225 22.0685 20.8003C22.0685 21.178 21.9463 21.4891 21.7019 21.7336C21.4352 22.0003 21.1187 22.1336 20.7525 22.1336C20.3863 22.1336 20.0805 22.0003 19.8352 21.7336L16.0019 17.8669Z" fill="rgba(var(--foreground-inputs-odds-rgb),0.3)" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <form class="body" [formGroup]="form" autocomplete="off">
                <div class="row">
                    <div class="col-md-12" >
                        <div class="form-group">
                            <div class="input-md">
                                <input
                                    #documentNumberElement
                                    type="text"
                                    (blur)="isFocused = false; validarCpf(autoPreenchimento = true)"
                                    id="cpf"
                                    class="form-control inverted-out"
                                    mask="000.000.000-00"
                                    formControlName="cpf"
                                    placeholder=""
                                    [dropSpecialCharacters]="false"
                                    inputmode="numeric"
                                    [readonly]="!activeEditingCPF"
                                    [ngClass]="applyCssInputError('cpf')"
                                    [class.input-focused]="isFocused"
                                >
                                <label for="cpf" class="text-input">{{ LabelCpf }}</label>
                                <a
                                    class="btn-change-cpf"
                                    *ngIf="!activeEditingCPF"
                                    (click)="handleActiveEditingCPF()"
                                >
                                    {{ 'Alterar CPF' }}
                                </a>
                            </div>
                            <app-error-msg 
                                [control]="form.get('cpf')"
                                label="{{'geral.cpf' | translate}}"
                                class="text-left"
                            >
                            </app-error-msg>
                        </div>
                    </div>
                </div>
                <div class="row" *ngIf="dataNascimento">
                    <div class="col-md-12" >
                        <div class="form-group">
                            <div class="input-md">
                                <input
                                    type="text"
                                    id="dataNascimento"
                                    class="form-control inverted-out"
                                    name="dataNascimento"
                                    [(ngModel)]="dataNascimento"
                                    [ngModelOptions]="{standalone: true}"
                                    placeholder=" "
                                    [readonly]="true"
                                >
                                <label class="text-input" for="dataNascimento">{{'geral.dataDeNascimento' | translate}}</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <div class="input-md">
                                <input
                                    type="text"
                                    id="email"
                                    class="form-control inverted-out"
                                    [ngClass]="applyCssInputError('email')"
                                    formControlName="email"
                                    placeholder=""
                                    (beforeinput)="onBeforeInput($event, 'email')"
                                >
                                <label class="text-input" for="email">{{'geral.email' | translate}}</label>
                            </div>
                            <app-error-msg
                                [control]="form.get('email')"
                                label="{{'geral.email' | translate}}"
                                class="text-left"
                            ></app-error-msg>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-8 div-country">
                        <div class="form-group style-phone-country-code">
                            <div class="input-md country-personalized">
                                <div class="div-button-personalized">
                                    <div class="label-personalized">
                                        <span class="label-country-code">{{'geral.codigo' | translate}}</span>
                                    </div>
                                    <div class="select-nationality">
                                        <select
                                            class="form-control style-select"
                                            formControlName="country"
                                            style="font-size: 12px;"
                                        >
                                            <option [value]="'+55'" selected>ðŸ‡§ðŸ‡· +55 </option>
                                            <option
                                                *ngFor="let countryCode of countryCodes" 
                                                [value]="countryCode.value"
                                            >
                                                {{countryCode.emoji + '  ' + countryCode.dial_code}}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="input-md input-phone">
                                <input
                                    type="text"
                                    id="telefone"
                                    mask="(00) 00000-0000"
                                    class="form-control inverted-out"
                                    formControlName="telefone"
                                    [ngClass]="applyCssInputError('telefone')"
                                    placeholder=""
                                    [dropSpecialCharacters]="false"
                                    inputmode="numeric"
                                >
                                <label class="text-input" for="telefone">{{'geral.telefone' | translate}}</label>
                                <app-error-msg
                                    [control]="form.get('telefone')"
                                    label="{{'geral.telefone' | translate}}"
                                    class="text-left"
                                ></app-error-msg>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="contents-nationality">
                    <div class="row">
                        <div class="col-md-8 div-country">
                            <div class="form-group style-phone-country-code">
                                <div class="input-md nationality-personalized">
                                    <div class="div-button-personalized">
                                        <div class="select-nationality">
                                            <div class="label-personalized">
                                                <span class="label-country-code">{{'geral.nacionalidade' | translate}}</span>
                                            </div>
                                            <select
                                                class="form-control style-select style-select-nationality"
                                                formControlName="nationality"
                                                style="font-size: 12px;"
                                            >
                                                <option selected [value]="26">{{'register.brasil' | translate}}</option>
                                                <option
                                                    *ngFor="let nationality of nationalities"
                                                    [value]="nationality.name"
                                                >
                                                    {{ nationality.name }}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <app-error-msg
                            [control]="form.get('nationality')"
                            label="Nacionalidade"
                            class="text-left"
                        ></app-error-msg>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group" [ngClass]="applyCssDivError('senha')">
                            <div class="input-md">
                                <input
                                    [type]="mostrarSenha ? 'text' : 'password'"
                                    id="password"
                                    class="form-control inverted-out"
                                    [ngClass]="applyCssInputError('senha')"
                                    formControlName="senha"
                                    placeholder=" "
                                    (beforeinput)="onBeforeInput($event, 'password')"
                                    (input)="isStrengthPassword ? checkPassword() : null"
                                    [ngbTooltip]="tooltipTemplate"
                                    [disableTooltip]="!isStrengthPassword"
                                    placement="bottom"
                                    tooltipClass="tooltip-password"
                                    triggers="focus"
                                >
                                <label class="text-input" for="password">{{'geral.senha' | translate}}</label>
                                <i
                                    class="fa showPassword"
                                    [ngClass]="mostrarSenha ? 'fa-eye-slash' : 'fa-eye'"
                                    (click)="mostrarSenha = !mostrarSenha"
                                ></i>
                            </div>
                            <app-error-msg
                                [control]="form.get('senha')"
                                label="{{'geral.senha' | translate}}"
                                class="text-left"
                            ></app-error-msg>
                            <small
                                *ngIf="!isStrengthPassword"
                                class="form-text text-muted"
                            >
                                {{'geral.requisitosSenha' | translate}}
                            </small>
                        </div>
                    </div>
                </div>
                <div class="contents-afiliado">
                    <div class="section-header" (click)="showAfiliateSection = !showAfiliateSection">
                        <i class="fa {{showAfiliateSection ? 'fa-chevron-down' : 'fa-chevron-right' }}" ></i>
                        <span class="span-afiliado">Tenho cÃ³digo de afiliaÃ§Ã£o</span>
                    </div>
                    <div class="section-body" *ngIf="showAfiliateSection">
                        <div class="col-md-12">
                            <div class="form-group" [ngClass]="applyCssDivError('afiliado')">
                                <div class="input-md">
                                    <input
                                        type="text"
                                        id="afiliado"
                                        class="form-control inverted-out"
                                        [ngClass]="applyCssInputError('afiliado')"
                                        formControlName="afiliado"
                                        placeholder=" "
                                        [readonly]="possuiCodigoAfiliado"
                                    >
                                    <label class="text-input" for="afiliado">{{'geral.codigo' | translate}}</label>
                                </div>
                                <app-error-msg
                                    [control]="form.get('afiliado')"
                                    label="CÃ³digo"
                                    class="text-left"
                                ></app-error-msg>
                            </div>
                        </div>
                    </div>
                </div>

                <input type="hidden" formControlName="check_1">
                <input type="text" formControlName="check_2" class="d-none">
                <input type="hidden" formControlName="btag">

                <div class="row captcha" *ngIf="provedorCaptcha == 'hcaptcha'">
                    <div class="col-12">
                        <ng-hcaptcha formControlName="captcha" [languageCode]="hCaptchaLanguage"></ng-hcaptcha>
                        <app-error-msg [control]="form.get('captcha')"></app-error-msg>
                    </div>
                    <ng-container *ngTemplateOutlet="registerErrorTemplate" />
                </div>

                <div class="row">
                    <div class="col-12">
                        <label [ngClass]="{ 'label-termo-uso': aplicarCssTermo }">
                            {{'geral.deAcordoComOsTermos1' | translate}}
                            <a
                                id="linkTermos"
                                target="_blank"
                                [routerLink]="['/informacoes/termos-condicoes']"
                                class="link-termos-politica"
                            > 
                                {{'geral.termosDeUso' | translate | lowercase}}
                            </a>

                            {{'geral.deAcordoComOsTermos2' | translate}}
                            <a 
                                d="linkPolitica"
                                target="_blank"
                                [routerLink]="['/informacoes/politica-privacidade']"
                                class="link-termos-politica"
                            >
                                {{'footer.politicaDePrivacidade' | translate | lowercase}}
                            </a>.
                        </label>
                    </div>
                </div>

                <div class="row" *ngIf="provedorCaptcha == 'recaptcha'">
                    <div class="col-12" [ngStyle]="{'text-align': 'left'}">
                        <re-captcha
                            class="grecaptcha-badge"
                            formControlName="captcha"
                            errorMode="handled"
                            size="invisible"
                            #captchaRef="reCaptcha"
                            (resolved)="resolved($event)"
                        ></re-captcha>
                        {{ 'register.protectedByReCaptchaPart1' | translate }}
                        <a
                            href="https://policies.google.com/privacy"
                            target="_blank"
                            class="link-termos-politica"
                        >
                            {{ 'register.protectedByReCaptchaPart2' | translate }}
                        </a> 
                        {{ 'register.protectedByReCaptchaPart3' | translate }}
                        <a
                            href="https://policies.google.com/terms"
                            target="_blank"
                            class="link-termos-politica"
                        >
                            {{ 'register.protectedByReCaptchaPart4' | translate }}
                        </a> 
                        {{ 'register.protectedByReCaptchaPart5' | translate }}
                    </div>
                    <ng-container *ngTemplateOutlet="registerErrorTemplate" />
                </div>

                <div class="row" *ngIf="!provedorCaptcha">
                    <div
                        class="col-12"
                        [ngStyle]="{'text-align': 'left', 'margin-top': '10px','padding-bottom': '24px'}"
                    >
                        <a
                            href="https://policies.google.com/privacy"
                            target="_blank"
                            class="link-termos-politica"
                        >
                            PolÃ­tica de Privacidade</a> do Google e os
                        <a
                            href="https://policies.google.com/terms"
                            target="_blank"
                            class="link-termos-politica"
                        >
                            Termos de ServiÃ§o
                        </a>
                        se aplicam.
                    </div>
                    <ng-container *ngTemplateOutlet="registerErrorTemplate" />
                </div>
                <ng-template #registerErrorTemplate>
                    <div class="col-12" *ngIf="errorMessage" style="margin-top: 10px;">
                        <div class="alert alert-danger">
                            {{errorMessage}}
                        </div>
                    </div>
                </ng-template>

                <ng-template #tooltipTemplate>
                    <ul class="requirements-password">
                        <p>{{'geral.passwordRequirements' | translate}}</p>

                        <div id="container-tooltip">
                            <li [ngClass]="{'fulfilled': requirements.minimumCharacters, 'unfulfilled': !requirements.minimumCharacters}">
                                <i [ngClass]="{'bi bi-check-circle': requirements.minimumCharacters, 'bi bi-x-circle': !requirements.minimumCharacters}"></i>
                                <span>{{'senhas.minimumCharactersPassword' | translate}}</span>
                            </li>
                            <li [ngClass]="{'fulfilled': requirements.mustContainOneUppercaseAndOneLowercaseLetter, 'unfulfilled': !requirements.mustContainOneUppercaseAndOneLowercaseLetter}">
                                <i [ngClass]="{'bi bi-check-circle': requirements.mustContainOneUppercaseAndOneLowercaseLetter, 'bi bi-x-circle': !requirements.mustContainOneUppercaseAndOneLowercaseLetter}"></i>
                                <span>{{'senhas.mustContainOneUppercaseAndOneLowercaseLetter' | translate}}</span>
                            </li>
                            <li [ngClass]="{'fulfilled': requirements.specialChar, 'unfulfilled': !requirements.specialChar}">
                                <i [ngClass]="{'bi bi-check-circle': requirements.specialChar, 'bi bi-x-circle': !requirements.specialChar}"></i>
                                <span>{{'senhas.specialChar' | translate}}</span>
                            </li>
                        </div>

                        <div class="password-level">
                            <div class="password-level__container">
                                {{"geral.passwordLevel" | translate}}
                                <div *ngIf="returnRequirementsValue == 1 ">
                                    <span id="weak">{{"geral.weak" | translate}}</span>
                                </div>
                                <div *ngIf="returnRequirementsValue == 2">
                                    <span id="medium">{{"geral.medium" | translate}}</span>
                                </div>
                                <div *ngIf="returnRequirementsValue === 3 ">
                                    <span id="strong">{{"geral.strong" | translate}}</span>
                                </div>
                            </div>
                            <div
                                class="bars"
                                [ngClass]="{
                                    'weak': returnRequirementsValue == 1,
                                    'medium': returnRequirementsValue == 2,
                                    'strong': returnRequirementsValue == 3
                                }"
                            >
                                <div class="strong-bar-one">
                                </div>
                                <div class="strong-bar-two">
                                </div>
                                <div class="strong-bar-three">
                                </div>
                            </div>
                        </div>
                    </ul>
                </ng-template>
            </form>
        </div>
        <div class="container-footer">
            <div class="footer-register">
                <button
                    type="submit"
                    class="btn btn-custom btn-block btn-cadastrar"
                    (click)="onSubmit()"
                    [disabled]="form.invalid || submitting"
                >
                    {{'geral.cadastrar' | translate}}
                </button>
            </div>
        </div>
    </div>

    <div class="register-cancel-modal" *ngIf="registerCancel">
        <div class="container-register-cancel">
            <div class="text-register-cancel">
                <div class="close-register-cancel-header">
                    <div class="icon-close-register-cancel">
                        <a class="close-modal-activation" aria-label="Close" (click)="registerOpen()">
                            <svg class="icon-hover" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <rect x="0.00195312" width="32" height="32" rx="2"/>
                                <path d="M16.0019 17.8669L12.1352 21.7336C11.8907 21.978 11.5796 22.1003 11.2019 22.1003C10.8241 22.1003 10.513 21.978 10.2685 21.7336C10.0241 21.4891 9.90186 21.178 9.90186 20.8003C9.90186 20.4225 10.0241 20.1114 10.2685 19.8669L14.1352 16.0003L10.2685 12.1669C10.0241 11.9225 9.90186 11.6114 9.90186 11.2336C9.90186 10.8558 10.0241 10.5447 10.2685 10.3003C10.513 10.0558 10.8241 9.93359 11.2019 9.93359C11.5796 9.93359 11.8907 10.0558 12.1352 10.3003L16.0019 14.1669L19.8352 10.3003C20.0796 10.0558 20.3907 9.93359 20.7685 9.93359C21.1463 9.93359 21.4574 10.0558 21.7019 10.3003C21.9685 10.5669 22.1019 10.8838 22.1019 11.2509C22.1019 11.618 21.9685 11.9234 21.7019 12.1669L17.8352 16.0003L21.7019 19.8669C21.9463 20.1114 22.0685 20.4225 22.0685 20.8003C22.0685 21.178 21.9463 21.4891 21.7019 21.7336C21.4352 22.0003 21.1187 22.1336 20.7525 22.1336C20.3863 22.1336 20.0805 22.0003 19.8352 21.7336L16.0019 17.8669Z" fill="rgba(var(--foreground-inputs-odds-rgb),0.3)" />
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="text-body-register-cancel">
                    <div class="h3-text-close-register-cancel">
                        <h3 class="modal-title-register">{{ 'registerCancel.titleCancelRegister' | translate}}</h3>
                    </div>
                    <div>
                        <ng-container *ngIf="promocaoAtiva && valorPromocao; else noPromotion">
                            <p>{{ 'registerCancel.dontMissOut' | translate}} {{this.valorPromocao | currency}}</p>
                        </ng-container>
                        <ng-template #noPromotion>
                            <p class="p-cancel-register">{{ 'registerCancel.youreAlmostThere' | translate}}</p>
                        </ng-template>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer-he">
            <button
                type="button"
                class="btn btn-custom btn-block btn-cadastrar"
                (click)="registerOpen()"
            >
                {{ 'registerCancel.continue' | translate }}
            </button>
            <button
                type="button"
                class="btn btn-secondary btn-cancel"
                (click)="cancelModal()"
            >
                {{ 'registerCancel.cancel' | translate }}
            </button>
        </div>
    </div>
</div>

