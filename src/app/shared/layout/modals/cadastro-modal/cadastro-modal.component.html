<div class="modal-header">
    <img [src]="LOGO" alt="" class="logo-modal">
    <a type="button" class="btn-close" aria-label="Close" (click)="activeModal.dismiss('Cross click')">
        <i class="fa fa-times"></i>
    </a>
</div>
<div class="modal-body">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <h3>{{'geral.informacoesPessoais' | translate}}</h3>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-4">
                    <div class="input-md">
                        <input type="text" id="nome" class="form-control inverted-out" [readonly]="formSocial" formControlName="nome"
                               [ngClass]="applyCssInputError('nome')" placeholder=" ">
                        <label for="nome">{{'geral.nome' | translate}}</label>
                    </div>
                    <app-error-msg [control]="form.get('nome')" label="{{'geral.nome' | translate}}"
                                   class="text-left"></app-error-msg>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-4" [ngClass]="applyCssDivError('sobrenome')">
                    <div class="input-md">
                        <input type="text" id="sobrenome" class="form-control inverted-out"
                               [ngClass]="applyCssInputError('sobrenome')"
                               [readonly]="formSocial"
                               formControlName="sobrenome" placeholder=" ">
                        <label for="sobrenome">{{'geral.sobrenome' | translate}}</label>
                    </div>
                    <app-error-msg [control]="form.get('sobrenome')" label="{{'geral.sobrenome' | translate}}"
                                   class="text-left"></app-error-msg>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-4">
                    <div class="input-md">
                        <input type="text" id="dataNascimento" class="form-control inverted-out" mask="d0/M0/0000"
                               formControlName="nascimento"
                               [ngClass]="applyCssInputError('nascimento')" placeholder=" ">
                        <label for="dataNascimento">{{'geral.dataDeNascimento' | translate}}</label>
                    </div>

                    <app-error-msg [control]="form.get('nascimento')" label="{{'geral.dataDeNascimento' | translate}}"
                                   class="text-left"></app-error-msg>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-4">
                    <div class="input-md">
                        <input type="text" id="cpf" class="form-control inverted-out" mask="000.000.000-00"
                               formControlName="cpf"
                               [ngClass]="applyCssInputError('cpf')" placeholder=" " [dropSpecialCharacters]="false"
                               inputmode="numeric">
                        <label for="cpf">{{'geral.cpf' | translate}}</label>
                    </div>

                    <app-error-msg [control]="form.get('cpf')" label="CPF" class="text-left"></app-error-msg>
                </div>
            </div>
        </div>
        <h3>{{'geral.informacoesDeContato' | translate}}</h3>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-4">
                    <div class="input-md">
                        <input type="text" id="telefone" mask="(00)00000-0000" class="form-control inverted-out"
                               formControlName="telefone"
                               [ngClass]="applyCssInputError('telefone')" placeholder=" "
                               [dropSpecialCharacters]="false" inputmode="numeric">
                        <label for="telefone">{{'geral.telefone' | translate}}</label>
                    </div>

                    <app-error-msg [control]="form.get('telefone')" label="{{'geral.telefone' | translate}}"
                                   class="text-left"></app-error-msg>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-4" [ngClass]="applyCssDivError('email')">
                    <div class="input-md">
                        <input type="text" id="email" class="form-control inverted-out"
                               [ngClass]="applyCssInputError('email')"
                               [readonly]="formSocial"
                               formControlName="email" placeholder=" ">
                        <label for="email">{{'geral.email' | translate}}</label>
                    </div>

                    <app-error-msg [control]="form.get('email')" label="{{'geral.email' | translate}}"
                                   class="text-left"></app-error-msg>
                </div>
            </div>
        </div>
        <h3>{{formSocial ? '' : 'geral.criarLogin' | translate}}</h3>
        <div class="row" *ngIf="!formSocial">
            <div class="col-md-6">
                <div class="form-group mb-4">
                    <div class="input-md">
                        <input type="text" id="usuario" class="form-control inverted-out" formControlName="usuario"
                               [ngClass]="applyCssInputError('usuario')" placeholder=" ">
                        <label for="usuario">{{'geral.usuario' | translate}}</label>
                    </div>

                    <app-error-msg [control]="form.get('usuario')" label="{{'geral.usuario' | translate}}" class="text-left"></app-error-msg>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-4" [ngClass]="applyCssDivError('senha')">
                    <div class="input-md">
                        <input [type]="mostrarSenha ? 'text' : 'password'" id="password"
                               class="form-control inverted-out" [ngClass]="applyCssInputError('senha')"
                               formControlName="senha" placeholder=" ">
                        <label for="password">{{'geral.senha' | translate}}</label>
                        <i class="fa showPassword" [ngClass]="mostrarSenha ? 'fa-eye-slash' : 'fa-eye'"
                           (click)="mostrarSenha = !mostrarSenha"></i>
                    </div>

                    <app-error-msg [control]="form.get('senha')" label="{{'geral.senha' | translate}}" class="text-left"></app-error-msg>
                    <small class="form-text text-muted">{{'geral.requisitosSenha' | translate}}</small>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6" *ngIf="!formSocial">
                <div class="form-group mb-4">
                    <div class="input-md">
                        <input [type]="mostrarConfirmarSenha ? 'text' : 'password'" id="confirmarSenha"
                               class="form-control inverted-out" formControlName="senha_confirmacao"
                               [ngClass]="applyCssInputError('senha_confirmacao')" placeholder=" ">
                        <label for="confirmarSenha">{{'senhas.confirmarSenha' | translate}}</label>
                        <i class="fa showPassword" [ngClass]="mostrarConfirmarSenha ? 'fa-eye-slash' : 'fa-eye'"
                           (click)="mostrarConfirmarSenha = !mostrarConfirmarSenha"></i>
                    </div>

                    <app-error-msg [control]="form.get('senha_confirmacao')"
                                   label="{{'senhas.confirmarSenha' | translate}}" class="text-left"></app-error-msg>
                </div>
            </div>
            <div class="col-md-6" *ngIf="afiliadoHabilitado">
                <div class="form-group mb-4" [ngClass]="applyCssDivError('afiliado')">
                    <div class="input-md">
                        <input type="text" id="afiliado" class="form-control inverted-out"
                               [ngClass]="applyCssInputError('afiliado')"
                               formControlName="afiliado" placeholder=" ">
                        <label for="afiliado">{{'geral.codigoDeAfiliacao' | translate}}</label>
                    </div>

                    <app-error-msg [control]="form.get('afiliado')" label="Código de afiliação(Opcional)"
                                   class="text-left"></app-error-msg>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <label class="label-termo-uso"><input class="checkbox-aceitar-termos" type="checkbox" formControlName="aceitar_termos">{{'geral.certificoQueTenhoMais' | translate}}<a
                        (click)="abrirModalTermosUso(termosUsoModal)" id="linkTermos"><b> {{'geral.termosDeUso' |
                            translate}}</b>.</a></label>
                <app-error-msg [control]="form.get('aceitar_termos')" label="Termos de Uso"
                    class="text-left"></app-error-msg>
            </div>
        </div>

        <input type="hidden" formControlName="check_1">
        <input type="text" formControlName="check_2" class="d-none">

        <div class="row captcha" *ngIf="provedorCaptcha == 'hcaptcha'">
            <div class="col-12">
                <ng-hcaptcha formControlName="captcha" [languageCode]="hCaptchaLanguage"></ng-hcaptcha>
                <app-error-msg [control]="form.get('captcha')"></app-error-msg>
            </div>

            <button type="submit" class="btn btn-custom btn-block btn-cadastrar" [disabled]="submitting">{{'geral.cadastrar' | translate}}</button>
        </div>

        <div class="row" *ngIf="provedorCaptcha == 'recaptcha'">
            <div class="col-12" [ngStyle]="{'text-align': 'left'}">
                <re-captcha  class="grecaptcha-badge" formControlName="captcha" #captchaRef="reCaptcha" (resolved)="onSubmit()" errorMode="handled" size="invisible" ></re-captcha>
                Este site é protegido por reCAPTCHA e a
                <a href="https://policies.google.com/privacy" target="_blank">Política de Privacidade</a> do Google e os
                <a href="https://policies.google.com/terms" target="_blank">Termos de Serviço</a> se aplicam.
            </div>

            <button type="submit" (click)="captchaRef.execute()" class="btn btn-custom btn-block btn-cadastrar" [disabled]="submitting">{{'geral.cadastrar' | translate}}</button>
            <asl-google-signin-button type='standard' size='medium' text='signup_with'></asl-google-signin-button>
        </div>
    </form>
</div>

<ng-template #termosUsoModal let-modal id="modal">
    <div class="modal-header">
        <img [src]="LOGO" alt="" class="logo-modal">
        <a type="button" class="btn-close" aria-label="Close" (click)="fecharModalTermos()">
            <i class="fa fa-times"></i>
        </a>
    </div>
    <div class="modal-body">
        <h3>{{'geral.termosDeUso' | translate | titlecase}}</h3>
        <form>
            <div class="form-group">
                <div class="row">
                    <div class="col col-md-12" [innerHTML]="termosDeUso.conteudo"></div>
                </div>
            </div>
        </form>
    </div>
</ng-template>

<ng-template #ativacaoCadastroModal let-modal>
    <div class="modal-header" style="display: flex; justify-content: end;">
        <a class="close-modal-ativacao" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <i class="fa fa-times" aria-hidden="true"></i>
        </a>
        <div class="content-modal-ativacao">
            <h3>{{'ativacaoEmail.cadastroAtivadoComSucesso' | translate}}</h3>
            <span>{{'ativacaoEmail.realizeSeuLogin' | translate}}</span>
            <img src="{{LOGO}}">
        </div>
    </div>
</ng-template>

